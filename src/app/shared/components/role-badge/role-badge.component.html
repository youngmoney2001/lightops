<span
  class="role-badge inline-flex items-center font-medium rounded-full border transition-all duration-150"
  [ngClass]="[config.color, sizeClasses]"
  [class.border-transparent]="true"
  [attr.aria-label]="'Rôle: ' + config.label"
  role="status"
>
  <!-- Icon -->
  <svg
    *ngIf="showIcon"
    class="flex-shrink-0 mr-1.5"
    [ngClass]="iconSize"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    aria-hidden="true"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      [attr.d]="config.icon"
    />
  </svg>

  <!-- Label -->
  <span class="whitespace-nowrap">
    {{ config.label }}
  </span>

  <!-- Optional tooltip trigger for extended info -->
  <button
    *ngIf="size !== 'sm'"
    type="button"
    class="ml-1.5 flex-shrink-0 opacity-60 hover:opacity-100 focus:outline-none focus:ring-1 focus:ring-current rounded-full transition-opacity duration-150"
    [ngClass]="iconSize"
    (click)="showTooltipInfo($event)"
    (keydown.enter)="showTooltipInfo($event)"
    (keydown.space)="showTooltipInfo($event)"
    aria-label="Plus d'informations sur ce rôle"
    tabindex="0"
  >
    <svg
      class="w-full h-full"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
  </button>
</span>

<!-- Tooltip (would be implemented with a tooltip service/component) -->
<div
  *ngIf="showTooltip"
  class="absolute z-10 w-64 p-3 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"
  role="tooltip"
>
  <div class="text-sm">
    <h4 class="font-semibold text-gray-900 mb-1">{{ config.label }}</h4>
    <p class="text-gray-600 mb-2">
      {{ getRoleDescription(role) }}
    </p>
    <div class="text-xs text-gray-500">
      <span class="font-medium">Permissions :</span> Accès complet
    </div>
  </div>
</div>

<!-- Screen reader only text for accessibility -->
<span class="sr-only">
  Utilisateur avec le rôle {{ config.label }}
</span>

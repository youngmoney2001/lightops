<div class="pagination" aria-label="Navigation de pagination">

  <!-- Items Info -->
  <div *ngIf="showItemsInfo && totalItems > 0" class="items-info mb-4 sm:mb-0">
    <p class="text-sm text-text-secondary">
      Affichage de
      <span class="font-medium text-text-primary">{{ startItem }}</span>
      à
      <span class="font-medium text-text-primary">{{ endItem }}</span>
      sur
      <span class="font-medium text-text-primary">{{ totalItems }}</span>
      éléments
    </p>
  </div>

  <!-- Navigation -->
  <nav class="flex items-center justify-between sm:justify-end" aria-label="Pagination">
    <!-- Mobile: Simple navigation -->
    <div class="flex-1 flex justify-between sm:hidden">
      <!-- Previous Button -->
      <button
        [disabled]="isFirstPage()"
        (click)="previousPage()"
        class="relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
        [class.opacity-50]="isFirstPage()"
        [class.cursor-not-allowed]="isFirstPage()"
        aria-label="Page précédente"
      >
        Précédent
      </button>

      <!-- Current Page Info -->
      <div class="flex items-center">
        <span class="text-sm text-text-secondary">
          Page <span class="font-medium">{{ currentPage }}</span> sur <span class="font-medium">{{ totalPages }}</span>
        </span>
      </div>

      <!-- Next Button -->
      <button
        [disabled]="isLastPage()"
        (click)="nextPage()"
        class="relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
        [class.opacity-50]="isLastPage()"
        [class.cursor-not-allowed]="isLastPage()"
        aria-label="Page suivante"
      >
        Suivant
      </button>
    </div>

    <!-- Desktop: Full navigation -->
    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
      <!-- Page Info -->
      <div *ngIf="showItemsInfo" class="hidden lg:block">
        <p class="text-sm text-text-secondary">
          Page <span class="font-medium">{{ currentPage }}</span> sur <span class="font-medium">{{ totalPages }}</span>
        </p>
      </div>

      <!-- Page Numbers -->
      <div>
        <div class="relative z-0 inline-flex rounded-lg shadow-sm -space-x-px" aria-label="Pages">
          <!-- First Page Button -->
          <button
            *ngIf="showFirstLast"
            [disabled]="isFirstPage()"
            (click)="firstPage()"
            class="relative inline-flex items-center px-2 py-2 rounded-l-lg border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
            [title]="'Première page'"
            aria-label="Première page"
          >
            <span class="sr-only">Première page</span>
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414zm-6 0a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414L5.414 10l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
          </button>

          <!-- Previous Button -->
          <button
            [disabled]="isFirstPage()"
            (click)="previousPage()"
            class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
            [class.rounded-l-lg]="!showFirstLast"
            [title]="'Page précédente'"
            aria-label="Page précédente"
          >
            <span class="sr-only">Précédent</span>
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
          </button>

          <!-- Page Numbers -->
          <ng-container *ngIf="showPageNumbers">
            <!-- Ellipsis for start -->
            <div
              *ngIf="pages[0] > 1"
              class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"
            >
              ...
            </div>

            <!-- Page buttons -->
            <button
              *ngFor="let page of pages"
              (click)="goToPage(page)"
              class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all duration-150"
              [class.text-white]="page === currentPage"
              [class.bg-primary]="page === currentPage"
              [class.border-primary]="page === currentPage"
              [class.z-10]="page === currentPage"
              [class.text-gray-700]="page !== currentPage"
              [class.hover:bg-gray-50]="page !== currentPage"
              [attr.aria-current]="page === currentPage ? 'page' : null"
              [attr.aria-label]="'Page ' + page"
            >
              {{ page }}
            </button>

            <!-- Ellipsis for end -->
            <div
              *ngIf="pages[pages.length - 1] < totalPages"
              class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"
            >
              ...
            </div>
          </ng-container>

          <!-- Next Button -->
          <button
            [disabled]="isLastPage()"
            (click)="nextPage()"
            class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
            aria-label="Page suivante"
          >
            <span class="sr-only">Suivant</span>
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
          </button>

          <!-- Last Page Button -->
          <button
            *ngIf="showFirstLast"
            [disabled]="isLastPage()"
            (click)="lastPage()"
            class="relative inline-flex items-center px-2 py-2 rounded-r-lg border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150"
            [title]="'Dernière page'"
            aria-label="Dernière page"
          >
            <span class="sr-only">Dernière page</span>
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              <path fill-rule="evenodd" d="M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>
</div>
